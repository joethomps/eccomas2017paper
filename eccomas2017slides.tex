\documentclass{beamer}
 
\mode<presentation>
{
  \usetheme{Boadilla}
  %\usetheme{default}
  %\usetheme{Darmstadt}
  \setbeamercovered{transparent}
  % or whatever (possibly just delete it)
}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{times}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amsfonts,amssymb,amsthm,amsbsy,amsmath}
\usepackage{pgfplots}
\pgfplotsset{compat=1.11} 
\usepackage{subfigure}
\usetikzlibrary{shapes,arrows,scopes,patterns,decorations.pathreplacing}
\usepackage[backend=biber, style=authoryear]{biblatex}
\bibliography{eccomas_2017}
\usefonttheme{professionalfonts}

\title[Equivalent Mass-Spring Models]{Equivalent Mass-Spring Models of Multibody Spacecraft for the Application of Wave-based Control}

\author{J. W. Thompson} %\and W. J.~O'Connor}

\institute[UCD]{University College Dublin}

\date[ECCOMAS MBD 2017] % (optional, should be abbreviation of conference name)
{8th Eccomas Thematic Conference on Multibody Dynamics \\ \vspace{8pt} \small{Czech Technical University, Prague, 19-22 June, 2017}}

\subject{Multibody Dynamics}

\pgfdeclareimage[height=1cm]{university-logo}{ucd_brandmark_colour}
\logo{\pgfuseimage{university-logo}}

\begin{document}

\begin{frame}
  \titlepage
\end{frame}
\begin{frame}{Outline}
  \tableofcontents
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%-------MOTIVATION--------%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Motivation}

\subsection{Wave-based Modelling and Control of Lumped Flexible Systems}

\begin{frame}{Wave-based Modelling of Lumped Systems}
\begin{itemize}
\item Classic underactuated control problem
\item Rest-to-rest motion
\item Combine gross motion control and active vibration damping
\item Novel approach - wave based model
\end{itemize}
%%%% image of mass-spring and underactuated systems - columns?
\end{frame}

\begin{frame}{Wave-based Control System}
\input{graphics/WBC-nunif-pres.tex}
\vspace{0.5cm}
\begin{itemize}
\item Strategy:
	\begin{enumerate} %%%% copy from eccomas pres
	\item Actuator launches a wave into the system which travels to the right 
	\item Wave reaches the system boundary and is reflected back leftwards
	\item Returning wave is measured and absorbed at the actuator
	\end{enumerate}
\item Successfully applied to rectilinear mass-spring systems \footcite{OConnor1998,OConnor2011}
\item Objective: extend to a wider class of systems (multi-body spacecraft)
\end{itemize}
\end{frame}

\subsection{Attitude Control of Multibody Spacecraft}
\begin{frame}{Spacecraft Modelled as Multibody Systems}
Actuators: TVC, thrusters, momentum wheels
Sensors: IMU, gyroscopes, accelerometers
\begin{columns}
\column{0.5\textwidth}
\begin{figure}
\includegraphics[width=\textwidth]{images/satellite.jpg}
\caption{Satellite with flexible appendages}
\end{figure}
\column{0.5\textwidth}
\begin{figure}
\includegraphics[width=\textwidth]{images/rocket3.pdf}
\caption{Satellite with flexible appendages}
\end{figure}
\end{columns}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%-------PROBLEM STATEMENT--------%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Problem Statement}
\begin{frame}{Problem Statement}
Given a SISO (single-input single-output) undamped system described by:
\begin{equation}
\ddot{\mathbf{q}}(t) + \Lambda\mathbf{q}(t) = \mathbf{b}u(t)
\label{eq:modal1}
\end{equation}
\begin{equation}
y(t) = \mathbf{c}^T \mathbf{q}(t)
\label{eq:modal2}
\end{equation}
where
\begin{equation}
\Lambda = \begin{bmatrix}
\lambda_1  &  0 & \cdots & 0 \\
0 & \lambda_2  & \ddots & 0 \\
\vdots & \ddots & \ddots & \vdots \\
0 & 0 & \cdots & \lambda_n \end{bmatrix}
,\quad \mathbf{b} = \begin{bmatrix} b_1 \\ b_2 \\ \vdots \\ b_n \end{bmatrix}
,\quad \mathbf{c} = \begin{bmatrix} c_1 \\ c_2 \\ \vdots \\ c_n \end{bmatrix}
\label{eq:modal3}
\end{equation}
where $u(t)$ is the input and $y(t)$ is the output,
\begin{enumerate}
\item Under what conditions can this system be transformed into a mass-spring string (for which WBC is known to work well)
\item How can the mass and stiffness values be calculated?
\end{enumerate}
\end{frame}

\begin{frame}
Coordinate transformation from $\mathbf{q}$ to a new coordinate system $\mathbf{x}$,
\begin{equation}
\mathbf{x} = P \mathbf{q}
\label{eq:transform}
\end{equation}
such that:
\begin{equation}
M\ddot{\mathbf{x}}(t) + K\mathbf{x}(t) = \mathbf{\hat{b}}u(t)
\label{eq:ms1}
\end{equation}
\begin{equation}
y(t) = \mathbf{\hat{c}}^T \mathbf{x}(t)
\label{eq:ms2}
\end{equation}
where $M$, $K$, $\mathbf{\hat{b}}$ and $\mathbf{\hat{c}}$ have the following structure:
\footnotesize{
$$
M = \begin{bmatrix}
m_1  &  0 & \cdots & 0 \\
0 & m_2  & \ddots & 0 \\
\vdots & \ddots & \ddots & \vdots \\
0 & 0 & \cdots & m_n \end{bmatrix}
, \quad
K = \begin{bmatrix}
k_0+k_1  &  -k_1 & 0 & \cdots & 0 \\
-k_1 & k_1+k_2  & -k_2 & \ddots & 0 \\
0 & -k_2 & \ddots & \ddots & \vdots \\
\vdots & \ddots & \ddots & k_{n-1}+k_{n-2} & -k_{n-1} \\
0 & 0 & \cdots & -k_{n-1} &  k_{n-1} + k_n \end{bmatrix}
$$
$$
\mathbf{\hat{b}} = \begin{bmatrix} 1 & 0 & \cdots & 0 \end{bmatrix}^T
,\quad \mathbf{\hat{c}} = \begin{bmatrix} 1 & 0 & \cdots & 0 \end{bmatrix}^T
\label{eq:ms3}
$$
}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%-------METHODS--------%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Methods}
\subsection{Inverse Eigenvalue Problem for Jacobi Matrices}
\begin{frame}
\end{frame}

\subsection{Mass Spring Reconstruction}
\begin{frame}
\end{frame}

\subsection{Necessary and Sufficient Conditions for Transformation}
\begin{frame}
By comparing this system to that of Eqs. \ref{eq:ms1}-\ref{eq:ms3} we get the following equation for $\mathbf{b}$ and $\mathbf{c}$.
\begin{equation}
M^{\frac{1}{2}} U A^{-1} \mathbf{b} = M^{\frac{1}{2}} U A \mathbf{c} = \begin{bmatrix} 1 &  0 & \cdots & 0 \end{bmatrix}^T
\label{eq:bhat}
\end{equation}
which can be simplified to
\begin{equation}
A^{-1} \mathbf{b} = A \mathbf{c} = \frac{1}{m_1} U^T \begin{bmatrix} 1 &  0 & \cdots & 0 \end{bmatrix}^T
\label{eq:bc1}
\end{equation}
and then
\begin{equation}
A^{-1} \mathbf{b} = A \mathbf{c} = \frac{1}{m_1} \mathbf{x}_1
\label{eq:bc2}
\end{equation}
This can be solved to give
\begin{equation}
a_i = \sqrt{\frac{b_i}{c_i}} ,\quad m_1 = \sqrt{\frac{1}{\sum b_i c_i}} ,\quad x_{i1} = \sqrt{\frac{b_i c_i}{\sum b_i c_i}}
\label{eq:bcxm}
\end{equation}
By combining the three steps the overall transformation can be written as
\begin{equation}
P =  M^{-\frac{1}{2}} U A^{-1}
\label{eq:p}
\end{equation}
Examining Eq. \ref{eq:bcxm} we find that a second necessary and sufficient condition for $P$ to exist is
\begin{equation}
\frac{b_i}{c_i} > 0 \quad \forall i
\label{eq:bc1}
\end{equation}
that is, the sign of each $b_i$ term is the same as the corresponding $c_i$ term. 
Also note however that if
\begin{equation}
\frac{b_i}{c_i} < 0 \quad \forall i
\label{eq:bc2}
\end{equation}
then we can write down a new system by changing the signs of both $u(t)$ and $\mathbf{b}$. We then have a new system identical to the old system but where the input is $-u(t)$ and Eq. \ref{eq:bc1} is satisfied.
This condition may be summarized as: the corresponding entries in the $\mathbf{b}$ and $\mathbf{c}$ vectors must either all have the same sign or all have opposite signs.
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%-------RESULTS--------%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Results}

\subsection{Segmented Rocket Model}

\begin{frame}{Segmented rocket model}
\begin{columns} %%% check alignment in beamer columns
\column{0.5\textwidth}
\begin{figure}
\input{graphics/seg3-rocket-allact-pres.tex}
\caption{Satellite with flexible appendages}
\end{figure}
\column{0.5\textwidth}
\begin{itemize}
\item 3 rigid bodies, 2 torsional springs
\item 4 actuators - three lateral thruster forces $f_i$
\item gimballed engine thrust - $\delta$
\item Three outputs - attitude sensors on each segment - $\alpha_1$, $\alpha_2$ and $\alpha_3$
\end{itemize}
\end{columns}
\end{frame}

\begin{frame}{Segmented rocket model}
\begin{multline}
\input{python/eq1.tex}
\end{multline}
\begin{equation}
\input{python/eq2.tex}
\end{equation}
\end{frame}

\begin{frame}
\begin{table}[!ht]
  \begin{center}
    \caption{Summary of model parameters representative of \emph{Vega} rocket \label{tab:modelparam}}
    \vspace{1mm}
    \begin{tabular}{ ccc }
	\hline
           Parameter & Value & Unit \\
	\hline
      	$m$ & $5 \cdot 10^4$ & $kg$\\
      	$k$ & $6 \cdot 10^7$ & $Nm$\\
      	$I$ & $5 \cdot 10^5$ & $kg~m^2$\\
      	$h$ & $10$ & $m$\\
      	$T$ & $2.3 \cdot 10^6$ & $N$\\
    \end{tabular}
  \end{center}
\end{table}
\end{frame}

\begin{frame}
Tab. \ref{tab:modelparam} presents numerical parameters for the model presented in Section \ref{sec:math-model} which are representative of the European launcher \emph{Vega} \cite{Perez2006}.
These values were substituted into the rocket equations of motion and then the system was diagonalised to have the same structure as Eqs. \ref{eq:modal1} to \ref{eq:modal3}.
\begin{multline}
\input{python/eqdiag1.tex}
\label{eq:num_rock1}
\end{multline}
\begin{equation}
\input{python/eqdiag2.tex}
\label{eq:num_rock2}
\end{equation}
\end{frame}

\subsection{Test Cases for different sensor-actuator combinations}

\begin{frame}{Example Step Response}{Test Case 1}
\begin{columns}
\column{0.25\textwidth}
text
\column{0.75\textwidth}
    \includegraphics[width=\textwidth]{graphics/rocket-trans-pres.pdf}
\end{columns}
\end{frame}

\begin{frame}{Example Step Response}{Test Case 1}
\begin{center}
    \input{graphics/testcase1.tex}
\end{center}
\end{frame}

\begin{frame}{Example Step Response}{Test Case 2}
\begin{center}
    \input{graphics/testcase3.tex}
\end{center}
\end{frame}

\begin{frame}{Example Step Response}{Test Case 3}
\begin{center}
    \input{graphics/testcase2.tex}
\end{center}
\end{frame}

\subsection{Basic Ideas for Proofs/Implementation}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%-------SUMMARY--------%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Summary}

\begin{frame}{Summary}

mass-spring representations of a wide class of SISO systems.
force on the first mass and the output is the position of the first mass.
These are the type of systems for which WBC has been shown to work well.
The transformation is possible for a system described by Eqs. \ref{eq:modal1}-\ref{eq:modal3}, with non-negative and distinct eigenvalues and corresponding entries in the $\mathbf{b}$ and $\mathbf{c}$ vectors either all having the same sign or all having opposite signs.

It is clear that the non-uniformity of the resulting mass-spring system and the position of this non-uniformity are key in assessing the difficulty of the control problem.
From a wave based perspective large masses in the centre of the cascade lead to the trapping of waves in the outer part of the system increasing settling times.

  % Keep the summary *very short*.
  \begin{itemize}
  \item
    The \alert{first main message} of your talk in one or two lines.
  \item
    The \alert{second main message} of your talk in one or two lines.
  \item
    Perhaps a \alert{third message}, but not more than that.
  \item
    Future Work
    \begin{itemize}
    \item A possible area for future research is to investigate equivalent systems where the input and output may be on different masses internal to the system.
    \item There is also scope for using similar techniques to optimise actuator and sensor locations within a system.
    \end{itemize}
    
  \end{itemize}
\end{frame}



% All of the following is optional and typically not needed. 
\appendix
\section<presentation>*{\appendixname}
\subsection<presentation>*{For Further Reading}

\begin{frame}[allowframebreaks]
  \frametitle<presentation>{For Further Reading}
\printbibliography
\end{frame}

\end{document}
